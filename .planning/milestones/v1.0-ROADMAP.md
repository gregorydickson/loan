# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-01-24
**Phases:** 1-9
**Total Plans:** 36

## Overview

This roadmap transforms the loan document extraction system from concept to deployed production-ready application across 9 phases. Starting with foundation and data models, we build the document ingestion pipeline with Docling, then add LLM extraction with Gemini 3.0, expose borrower data through a REST API, present everything through a Next.js frontend, deploy to GCP infrastructure, complete with comprehensive documentation and testing, wire the extraction pipeline end-to-end, and add asynchronous background processing with Cloud Tasks. Each phase delivers a coherent, verifiable capability building toward the core value: accurate extraction of borrower data with complete traceability.

## Phases

### Phase 1: Foundation & Data Models

**Goal**: Establish project structure with all dependencies and define the Pydantic schemas that represent extracted borrower data
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01-PLAN.md - Backend project structure, pyproject.toml, Docker Compose
- [x] 01-02-PLAN.md - Frontend Next.js project with shadcn/ui
- [x] 01-03-PLAN.md - Pydantic data models with unit tests

**Details:**
- Requirements: FOUND-01 through FOUND-07 (7), MODEL-01 through MODEL-07 (7) — Total: 14 requirements
- Success Criteria: Python imports work, npm dev server starts, Docker Compose runs, BorrowerRecord validates, JSON serialization works
- Status: Complete (2026-01-23)

### Phase 2: Document Ingestion Pipeline

**Goal**: Process uploaded documents (PDF, DOCX, images) through Docling and store in GCS with database tracking
**Depends on**: Phase 1
**Plans**: 4 plans

Plans:
- [x] 02-01-PLAN.md - Database models and Alembic setup (SQLAlchemy models, migrations, DocumentRepository)
- [x] 02-02-PLAN.md - Docling processor and GCS client (document conversion, file storage)
- [x] 02-03-PLAN.md - Document service and upload API (orchestration, POST /api/documents endpoint)
- [x] 02-04-PLAN.md - Gap closure: Wire Docling processing into upload flow, add end-to-end tests

**Details:**
- Requirements: INGEST-01 through INGEST-14 (14), DB-01 through DB-12 (12) — Total: 26 requirements
- Success Criteria: PDF upload creates DB record, Docling extracts text, GCS storage works, duplicate detection, error handling
- Status: Complete (2026-01-23)

### Phase 3: LLM Extraction & Validation

**Goal**: Extract structured borrower data from document text using Gemini 3.0 with complexity-based model selection and hybrid validation
**Depends on**: Phase 2
**Plans**: 5 plans

Plans:
- [x] 03-01-PLAN.md - Gemini client with retry and error handling
- [x] 03-02-PLAN.md - Complexity classifier, prompt templates, and document chunker
- [x] 03-03-PLAN.md - Validation service and confidence scoring
- [x] 03-04-PLAN.md - Extraction orchestrator with deduplication
- [x] 03-05-PLAN.md - Consistency validation (address conflicts, income progression, cross-document checks)

**Details:**
- Requirements: EXTRACT-01 through EXTRACT-29 (29), VALID-01 through VALID-09 (9) — Total: 38 requirements
- Success Criteria: Flash/Pro routing, source attribution, confidence scores, format validation, chunking, consistency checks
- Status: Complete (2026-01-24)

### Phase 4: Data Storage & REST API

**Goal**: Persist extracted borrower data with relationships and expose through searchable REST endpoints
**Depends on**: Phase 3
**Plans**: 3 plans

Plans:
- [x] 04-01-PLAN.md - BorrowerRepository with CRUD and search operations
- [x] 04-02-PLAN.md - CORS middleware, exception handlers, document status endpoint
- [x] 04-03-PLAN.md - Borrower API endpoints with search and pagination

**Details:**
- Requirements: DB-13 through DB-20 (8), API-01 through API-24 (24) — Total: 32 requirements
- Success Criteria: Upload endpoint, borrower retrieval, search, OpenAPI docs, proper HTTP status codes
- Status: Complete (2026-01-24)

### Phase 5: Frontend Dashboard

**Goal**: Provide a visual interface for document upload, borrower browsing, and architecture documentation
**Depends on**: Phase 4
**Plans**: 5 plans

Plans:
- [x] 05-01-PLAN.md - App shell, layout, and API client (Wave 1)
- [x] 05-02-PLAN.md - Document upload and list pages (Wave 2)
- [x] 05-03-PLAN.md - Borrower list and detail pages (Wave 2)
- [x] 05-04-PLAN.md - Architecture documentation pages (Wave 2)
- [x] 05-05-PLAN.md - Gap closure: Wire BorrowerCard into detail page (Wave 1)

**Details:**
- Requirements: UI-01 through UI-37 (37)
- Success Criteria: Drag-and-drop upload, borrower search/browse, income visualization, architecture pages, responsive design
- Status: Complete (2026-01-24)

### Phase 6: GCP Infrastructure

**Goal**: Deploy the complete system to Google Cloud Platform with infrastructure as code
**Depends on**: Phase 5
**Plans**: 4 plans

Plans:
- [x] 06-01-PLAN.md - Terraform foundation (providers, variables, VPC, IAM)
- [x] 06-02-PLAN.md - Dockerfiles and deployment scripts
- [x] 06-03-PLAN.md - GCP managed services (Cloud SQL, Cloud Storage, Cloud Tasks)
- [x] 06-04-PLAN.md - Cloud Run services and outputs

**Details:**
- Requirements: INFRA-01 through INFRA-27 (27)
- Success Criteria: Terraform apply works, backend health check, frontend loads, E2E pipeline, deployment automation
- Status: Complete (2026-01-24)

### Phase 7: Documentation & Testing

**Goal**: Complete system documentation and achieve >80% test coverage with type safety
**Depends on**: Phase 6
**Plans**: 5 plans

Plans:
- [x] 07-01-PLAN.md - System design documentation (DOCS-01 to DOCS-19)
- [x] 07-02-PLAN.md - Architecture decision records (DOCS-20 to DOCS-24)
- [x] 07-03-PLAN.md - README and project documentation (DOCS-25 to DOCS-28)
- [x] 07-04-PLAN.md - Test coverage expansion (TEST-01 to TEST-17)
- [x] 07-05-PLAN.md - Type safety and quality verification (TEST-18 to TEST-20)

**Details:**
- Requirements: DOCS-01 through DOCS-28 (28), TEST-01 through TEST-20 (20) — Total: 48 requirements
- Success Criteria: SYSTEM_DESIGN.md, ADRs, README, >80% coverage, mypy strict passes
- Status: Complete (2026-01-24)

### Phase 8: Wire Document-to-Extraction Pipeline

**Goal**: Connect orphaned extraction subsystem to document processing pipeline and enable end-to-end borrower extraction
**Depends on**: Phase 7
**Plans**: 3 plans

Plans:
- [x] 08-01-PLAN.md - Wire extraction dependencies into DocumentService via FastAPI DI
- [x] 08-02-PLAN.md - Integrate BorrowerExtractor into upload() with persistence
- [x] 08-03-PLAN.md - E2E integration tests for extraction pipeline

**Details:**
- Gap Closure: Closes critical integration gap from v1.0 audit - Phase 2 -> Phase 3 connection, Phase 3 -> Phase 4 data flow
- Requirements: 44 previously blocked requirements (EXTRACT-*, VALID-*, DB-13 through DB-18)
- Success Criteria: BorrowerExtractor injected, upload creates borrowers, GET /api/borrowers works, frontend displays data, E2E tests pass
- Status: Complete (2026-01-24)

### Phase 9: Cloud Tasks Background Processing

**Goal**: Move document extraction to asynchronous background queue with retry logic
**Depends on**: Phase 8
**Plans**: 4 plans

Plans:
- [x] 09-01-PLAN.md - Cloud Tasks client and configuration (dependency, settings, IAM)
- [x] 09-02-PLAN.md - Task handler endpoint for async document processing
- [x] 09-03-PLAN.md - Wire async task queueing into document upload flow
- [x] 09-04-PLAN.md - Comprehensive tests for async processing

**Details:**
- Gap Closure: Closes ingestion requirements gap - synchronous processing violated INGEST-08, INGEST-10
- Requirements: INGEST-08, INGEST-10 (2)
- Success Criteria: Task queueing, immediate upload response with PENDING, async extraction, retry with exponential backoff, status updates
- Status: Complete (2026-01-24)

---

## Milestone Summary

**Key Decisions:**

- Docling for document processing (Production-grade PDF/DOCX/image parsing) — ✓ Good outcome
- Gemini 3.0 with dynamic model selection (Flash for standard, Pro for complex) — ✓ Good outcome
- PostgreSQL for relational storage with source attribution — ✓ Good outcome
- FastAPI for async REST API — ✓ Good outcome
- Next.js 14 App Router for frontend — ✓ Good outcome
- Cloud Run for serverless deployment — ✓ Good outcome
- Cloud Tasks for async processing — ✓ Good outcome
- Phase 8 Gap Closure (wired orphaned extraction subsystem) — ✓ Good outcome

**Issues Resolved:**

- Critical integration gap: Extraction subsystem was orphaned (Phase 8 closed)
- Missing async processing: INGEST-08, INGEST-10 unsatisfied (Phase 9 closed)
- Frontend gap: BorrowerCard not wired to detail page (Phase 5.5 closed)
- All E2E flows now working end-to-end
- Zero orphaned code

**Issues Deferred:**

(None - all critical gaps closed)

**Technical Debt Incurred:**

- Task handler uses temporary DocumentService instance (acknowledged in code comments, minimal impact)
- CloudTasksClient uses global singleton pattern (standard pattern for Cloud SDK clients, no impact)

---

_For current project status, see .planning/ROADMAP.md (or next milestone roadmap)_
