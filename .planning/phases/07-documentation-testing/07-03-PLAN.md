---
phase: 07-documentation-testing
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
autonomous: true

must_haves:
  truths:
    - "Developer can set up project following README instructions"
    - "Local development environment starts with documented commands"
    - "GCP deployment process is documented"
    - "API usage examples demonstrate key endpoints"
  artifacts:
    - path: "README.md"
      provides: "Complete project documentation for setup and usage"
      min_lines: 200
      contains: ["## Setup", "## Running Locally", "## Deployment", "## API Usage"]
  key_links:
    - from: "README.md"
      to: "docker-compose.yml"
      via: "Setup instructions reference"
      pattern: "docker-compose"
    - from: "README.md"
      to: "infrastructure/scripts/"
      via: "Deployment instructions"
      pattern: "deploy\\.sh|setup-gcp\\.sh"
---

<objective>
Create comprehensive README documentation for the loan document extraction system.

Purpose: Enable developers to quickly understand, set up, run, and deploy the project.

Output: README.md at project root with setup instructions, local development guide, GCP deployment steps, API usage examples, and architecture summary.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/07-documentation-testing/07-CONTEXT.md

# Reference actual project files for accurate documentation
@docker-compose.yml
@backend/pyproject.toml
@frontend/package.json
@infrastructure/scripts/deploy.sh
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create README with Project Overview and Setup</name>
  <files>README.md</files>
  <action>
Create or update README.md at the project root with comprehensive documentation.

**Structure:**

```markdown
# Loan Document Data Extraction System

A production-grade system for extracting structured borrower data from loan documents (PDF, DOCX, images) using AI-powered document processing.

## Features

- **Document Processing**: Parse PDF, DOCX, and scanned images using Docling with built-in OCR
- **AI Extraction**: Extract borrower information using Google Gemini 3.0 with dynamic model selection
- **Source Attribution**: Every extracted field traces back to the source document and page
- **Validation**: Automated format validation (SSN, phone, zip) with confidence scoring
- **Web Dashboard**: React-based UI for document upload and borrower management

## Architecture

[Brief 1-paragraph summary referencing docs/SYSTEM_DESIGN.md for details]

```mermaid
flowchart LR
    Upload[Document Upload] --> Docling[Docling Parser]
    Docling --> Gemini[Gemini Extraction]
    Gemini --> Validate[Validation]
    Validate --> DB[(PostgreSQL)]
    DB --> API[REST API]
    API --> UI[Dashboard]
```

## Tech Stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| Backend | FastAPI | Async REST API |
| Frontend | Next.js 14 | React dashboard |
| Document Processing | Docling | PDF/DOCX/Image parsing |
| LLM | Google Gemini 3.0 | Data extraction |
| Database | PostgreSQL | Relational storage |
| Storage | Google Cloud Storage | Document files |
| Deployment | Cloud Run | Serverless containers |

## Prerequisites

- Python 3.10+
- Node.js 20+
- Docker and Docker Compose
- Google Cloud SDK (for deployment)
- Gemini API key

## Setup

### 1. Clone the Repository

\`\`\`bash
git clone <repository-url>
cd loan
\`\`\`

### 2. Backend Setup

\`\`\`bash
cd backend

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies (including dev tools)
pip install -e ".[dev]"
\`\`\`

### 3. Frontend Setup

\`\`\`bash
cd frontend

# Install dependencies
npm install
\`\`\`

### 4. Environment Configuration

Create `.env` files:

**backend/.env:**
\`\`\`bash
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/loan_db
GCS_BUCKET_NAME=  # Optional for local dev
GEMINI_API_KEY=your-api-key-here
\`\`\`

**frontend/.env.local:**
\`\`\`bash
NEXT_PUBLIC_API_URL=http://localhost:8000
\`\`\`
```

Use actual paths and commands from the project.
  </action>
  <verify>
README.md exists with:
- Project title and description
- Tech stack table
- Prerequisites list
- Setup instructions for backend and frontend
  </verify>
  <done>
README with project overview, architecture summary, and setup instructions created
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Running Locally and Development Guide</name>
  <files>README.md</files>
  <action>
Add sections for running the application locally.

**Add these sections:**

```markdown
## Running Locally

### Start Infrastructure

\`\`\`bash
# Start PostgreSQL and Redis
docker-compose up -d
\`\`\`

### Run Database Migrations

\`\`\`bash
cd backend
alembic upgrade head
\`\`\`

### Start Backend Server

\`\`\`bash
cd backend
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
\`\`\`

The API will be available at http://localhost:8000
- API docs: http://localhost:8000/docs
- Health check: http://localhost:8000/health

### Start Frontend Development Server

\`\`\`bash
cd frontend
npm run dev
\`\`\`

The dashboard will be available at http://localhost:3000

## Development

### Running Tests

\`\`\`bash
cd backend

# Run all tests with coverage
pytest

# Run only unit tests
pytest tests/unit

# Run specific test file
pytest tests/extraction/test_llm_client.py

# Run with verbose output
pytest -v --cov-report=html
\`\`\`

### Code Quality

\`\`\`bash
cd backend

# Type checking
mypy src/

# Linting
ruff check src/

# Format code
ruff format src/
\`\`\`

### Frontend Development

\`\`\`bash
cd frontend

# Type checking
npm run type-check

# Build for production
npm run build
\`\`\`

## Project Structure

\`\`\`
loan/
├── backend/
│   ├── src/
│   │   ├── api/           # FastAPI routes
│   │   ├── extraction/    # LLM extraction logic
│   │   ├── ingestion/     # Document processing
│   │   ├── models/        # Pydantic schemas
│   │   └── storage/       # Database & GCS
│   ├── tests/             # pytest tests
│   └── alembic/           # Database migrations
├── frontend/
│   ├── app/               # Next.js pages
│   ├── components/        # React components
│   └── lib/               # API client
├── infrastructure/
│   ├── terraform/         # IaC configuration
│   └── scripts/           # Deployment scripts
└── docs/                  # Documentation
\`\`\`
```
  </action>
  <verify>
README contains:
- "## Running Locally" section with docker-compose, backend, frontend commands
- "## Development" section with test and quality commands
- "## Project Structure" section with directory tree
  </verify>
  <done>
Local running instructions, development guide, and project structure documented
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Deployment and API Usage Documentation</name>
  <files>README.md</files>
  <action>
Complete README with deployment and API usage sections.

**Add these sections:**

```markdown
## Deployment

### Prerequisites

1. Google Cloud project with billing enabled
2. gcloud CLI authenticated
3. Required APIs enabled (Cloud Run, Cloud SQL, Secret Manager, etc.)

### Deploy to GCP

\`\`\`bash
# Initialize infrastructure
cd infrastructure/scripts
chmod +x setup-gcp.sh deploy.sh
./setup-gcp.sh

# Deploy services
./deploy.sh
\`\`\`

See [docs/SYSTEM_DESIGN.md](docs/SYSTEM_DESIGN.md) for detailed deployment architecture.

### Environment Variables (Production)

These are set automatically by Terraform via Secret Manager:
- `DATABASE_URL`: Cloud SQL connection string
- `GEMINI_API_KEY`: Gemini API key
- `GCS_BUCKET_NAME`: Document storage bucket

## API Usage

### Upload a Document

\`\`\`bash
curl -X POST http://localhost:8000/api/documents \
  -F "file=@/path/to/document.pdf"
\`\`\`

Response:
\`\`\`json
{
  "id": "uuid-here",
  "filename": "document.pdf",
  "status": "completed",
  "page_count": 5
}
\`\`\`

### Get Document Status

\`\`\`bash
curl http://localhost:8000/api/documents/{document_id}/status
\`\`\`

### List Borrowers

\`\`\`bash
curl "http://localhost:8000/api/borrowers?page=1&page_size=10"
\`\`\`

### Get Borrower Details

\`\`\`bash
curl http://localhost:8000/api/borrowers/{borrower_id}
\`\`\`

Response includes:
- Borrower information (name, SSN, address)
- Income records with source attribution
- Account numbers
- Source references (document, page, text snippet)

### Search Borrowers

\`\`\`bash
# Search by name
curl "http://localhost:8000/api/borrowers/search?name=John"

# Search by account number
curl "http://localhost:8000/api/borrowers/search?account_number=12345"
\`\`\`

## Documentation

- [System Design](docs/SYSTEM_DESIGN.md) - Architecture, pipeline, scaling analysis
- [Architecture Decisions](docs/ARCHITECTURE_DECISIONS.md) - ADRs for technology choices

## License

MIT
```

**Final checks:**
- Ensure all commands are accurate to the actual project
- Verify paths match actual file structure
- Total document should be 200+ lines
  </action>
  <verify>
```bash
# Verify README completeness
grep -c "## Deployment" README.md && \
grep -c "## API Usage" README.md && \
grep -c "curl" README.md && \
wc -l README.md
```
README should have deployment section, API usage with curl examples, and 200+ lines.
  </verify>
  <done>
Complete README with deployment guide, API usage examples, and documentation links
  </done>
</task>

</tasks>

<verification>
1. README.md exists at project root with 200+ lines
2. Contains setup instructions (prerequisites, backend, frontend)
3. Contains running instructions (docker-compose, uvicorn, npm run dev)
4. Contains deployment instructions (GCP)
5. Contains API usage examples with curl commands
6. Covers requirements DOCS-25 through DOCS-28
</verification>

<success_criteria>
- README.md contains complete setup instructions a new developer can follow
- Local development commands are documented and accurate
- GCP deployment process is documented
- API usage examples with curl demonstrate key endpoints
- Links to SYSTEM_DESIGN.md and ARCHITECTURE_DECISIONS.md included
</success_criteria>

<output>
After completion, create `.planning/phases/07-documentation-testing/07-03-SUMMARY.md`
</output>
